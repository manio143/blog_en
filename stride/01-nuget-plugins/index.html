<!doctype html><html lang=en-us dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="
  1. Using NuGet packages as plugins
  #

This post will be describing my journey to get a sensible plugin orchestration and delivery mechanism in place for the Stride game engine.
My main goal is to use NuGet architecture as much as possible and deliver a user experience that doesn&rsquo;t require you to be a genius, nor has you copy-pasting things around too much. And because plugins are only meant for build time, and may target something else than your game, they cannot be directly referenced the usual way."><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://devblog.dziubiak.pl/stride/01-nuget-plugins/"><meta property="og:site_name" content="Marian's Blog"><meta property="og:title" content="1. Using NuGet packages as plugins"><meta property="og:description" content="1. Using NuGet packages as plugins # This post will be describing my journey to get a sensible plugin orchestration and delivery mechanism in place for the Stride game engine. My main goal is to use NuGet architecture as much as possible and deliver a user experience that doesnâ€™t require you to be a genius, nor has you copy-pasting things around too much. And because plugins are only meant for build time, and may target something else than your game, they cannot be directly referenced the usual way."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="stride"><meta property="article:modified_time" content="2023-10-16T07:34:57+01:00"><meta property="og:image" content="https://devblog.dziubiak.pl/blog.jpg"><title>1. Using NuGet packages as plugins | Marian's Blog</title>
<link rel=icon href=/favicon.png><link rel=manifest href=/manifest.json><link rel=canonical href=https://devblog.dziubiak.pl/stride/01-nuget-plugins/><link rel=stylesheet href=/book.min.2d7fec8e866046a7460a1cc86027535586803606a87c87da3098bcd8d5a2b62d.css integrity="sha256-LX/sjoZgRqdGChzIYCdTVYaANgaofIfaMJi82NWiti0=" crossorigin=anonymous><script defer src=/fuse.min.js></script><script defer src=/en.search.min.e220b5418b3fc5ddd487c3bb8dd43bba5ecd6366ca1bbaeacfb54fdb14948b16.js integrity="sha256-4iC1QYs/xd3Uh8O7jdQ7ul7NY2bKG7rqz7VP2xSUixY=" crossorigin=anonymous></script><script defer src=https://cloud.umami.is/script.js data-website-id=487bcc6b-5cf2-4079-af93-72592662cf29></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><img src=/manio.png alt=Logo class=book-icon><span>Marian's Blog</span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul><li><a href=/excos/>Excos</a><ul><li><a href=/excos/01-simple-cd-pipeline/>1. Simple CI/CD pipeline</a></li><li><a href=/excos/03-privacy-compliance/>3. Implementing privacy compliance</a></li></ul></li><li><a href=/iqa-management-hub/>IQA Management Hub</a><ul><li><a href=/iqa-management-hub/01-writing-system-tests/>1. Writing system tests</a></li></ul></li><li><a href=/stride/>Stride</a><ul><li><a href=/stride/01-nuget-plugins/ class=active>1. Using NuGet packages as plugins</a></li></ul></li><li><a href=/telemetry/>Telemetry</a><ul><li><a href=/telemetry/01-exporting-eventsource-locally/>1. Exporting EventSource logs to CSV</a></li></ul></li><li><a href=/web/>Web</a><ul><li><a href=/web/01-isolated-features/>1. Isolated web features within a single ASP.NET Core service</a></li><li><a href=/web/02-experimentation/>2. Short guide to experimentation</a></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label><h3>1. Using NuGet packages as plugins</h3><label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#detecting-something-is-a-plugin>Detecting something is a plugin</a></li><li><a href=#circular-dependencies>Circular dependencies</a><ul><li><a href=#indirect-reference-idea>Indirect reference idea</a></li><li><a href=#making-plugins-not-have-dependencies>Making plugins not have dependencies</a></li></ul></li><li><a href=#next>Next?</a></li></ul></nav></aside></header><article class="markdown book-article"><h1 id=1-using-nuget-packages-as-plugins>1. Using NuGet packages as plugins
<a class=anchor href=#1-using-nuget-packages-as-plugins>#</a></h1><p>This post will be describing my journey to get a sensible plugin orchestration and delivery mechanism in place for the Stride game engine.
My main goal is to use NuGet architecture as much as possible and deliver a user experience that doesn&rsquo;t require you to be a genius, nor has you copy-pasting things around too much. And because plugins are only meant for build time, and may target something else than your game, they cannot be directly referenced the usual way.</p><p>Stride integrates with MSBuild in a few ways. The GameStudio is acting a bit like Visual Studio in that it allows you to add projects to your solution,
builds the projects for you when you make code changes, etc.
So when thinking about a plugin architecture I immediately thought about using NuGet package references as a way to deliver plugins and resolve their dependencies.
Stride already performs NuGet restore and parses the <code>package.assets.json</code> file to browse the dependencies of your projects.
What is needed now is a system that allows us to detect plugins and load them into memory of the editor.</p><h2 id=detecting-something-is-a-plugin>Detecting something is a plugin
<a class=anchor href=#detecting-something-is-a-plugin>#</a></h2><p>Initially I thought it may be enough to have the user mark a PackageReference with <code>StridePlugin</code> property.
However, this requires the user to explicitly know what is a plugin and what isn&rsquo;t.
And there&rsquo;s an issue with my ease-of-use goal. If the user references a runtime package, say <code>Stride.Physics</code>, we would expect that
the plugin package <code>Stride.Physics.Design</code> would be automatically referenced as it is necessary to include it to process physics assets.</p><p>So I went online and I found
<a href="https://learn.microsoft.com/en-us/nuget/create-packages/set-package-type?tabs=dotnet#custom-package-types">PackageType</a>
concept which enables us to declare something is a Stride plugin when creating the NuGet package.
It&rsquo;s great and it also gives us the ability to filter NuGet.org for packages with the specified type - e.g.
<a href="https://www.nuget.org/packages?packageType=StridePlugin">https://www.nuget.org/packages?packageType=StridePlugin</a> - which is a huge win for a mechanism of discovering plugins.</p><p>This is great, however, currently package type is only used by NuGet SDK when installing package first time into your project to detect that for example your not referencing a .NET tool as dependency and it doesn&rsquo;t preserve this information for later.
So I have opened an issue on NuGet repo to ask for adding support for it (
<a href=https://github.com/NuGet/Home/issues/12934>#12934</a>).
In the meantime I foresee a potential workaround where a target in <code>Stride.Core</code> checks PackageType of your project and if it matches the plugin type
it emits a new file into your package for which we can look after your package is unpacked in the nuget cache.</p><p>Ok, so given a dependency tree where some deps are plugins we can probably detect the plugins and select them for loading.</p><h2 id=circular-dependencies>Circular dependencies
<a class=anchor href=#circular-dependencies>#</a></h2><p>So I mentioned earlier how the author of <code>Stride.Physics</code> should be able to declare that plugin package <code>Stride.Physics.Design</code> needs to be included for the user.
How do the dependencies look like?</p><pre tabindex=0><code>User project -&gt; Stride.Physics -?-&gt; Stride.Physics.Design -&gt; Stride.Physics
</code></pre><p>Ok, so in 90% of plugins I&rsquo;m aiming at, there will be a runtime lib and a design lib and the design lib has to reference runtime lib to generate data for the runtime lib to consume.</p><p>NuGet doesn&rsquo;t allow circular dependencies. You won&rsquo;t even create the package (if using regular tooling).</p><p>So I started thinking. And the idea was good but ultimately doesn&rsquo;t work. But this blog post is about exploring ideas so let&rsquo;s go.</p><h3 id=indirect-reference-idea>Indirect reference idea
<a class=anchor href=#indirect-reference-idea>#</a></h3><p>Let&rsquo;s simplify names - <code>X</code> is runtime lib, <code>X.D</code> is design time lib.</p><ul><li><code>X.D</code> references <code>X</code> via ProjectReference which will be converted into a package dependency when packed.</li><li><code>X.D</code> marks itself as a Stride plugin.</li><li><code>X</code> notes <code>&lt;RequiredStridePlugin Include="Plugin" Version="1.0.0" /></code> in its project</li><li>When <code>X</code> is packed we create a <code>build/X.targets</code> file which will be included in the user project that declares items <code>IncludeStridePlugin</code> matching the requirement.</li><li>When user project referencing <code>X</code> is built we convert <code>IncludeStridePlugin</code> into <code>PackageReference</code></li></ul><p>I learned a bit more about MSBuild while working on this. Especially trying to answer the question how to select the maximum version from the possibly duplicate containing list of <code>IncludeStridePlugin</code> items. And the answer was
<a href="https://learn.microsoft.com/en-us/visualstudio/msbuild/item-metadata-in-target-batching?view=vs-2022">target batching</a>.</p><p>Here&rsquo;s my code which was placed in <code>Stride.Core</code> targets:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;!--
</span></span></span><span style=display:flex><span><span style=color:#75715e>First the creator of a plugin will include the following in their runtime project:
</span></span></span><span style=display:flex><span><span style=color:#75715e>  
</span></span></span><span style=display:flex><span><span style=color:#75715e>&lt;ItemGroup&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>  &lt;RequiredStridePlugin Include=&#34;MyPlugin&#34; Version=&#34;1.0.0&#34; /&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>&lt;/ItemGroup&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>  
</span></span></span><span style=display:flex><span><span style=color:#75715e>This target will generate a RequiredStridePlugin.targets file in the buildTransitive folder of the package,
</span></span></span><span style=display:flex><span><span style=color:#75715e>so that the consumers of the runtime package will have the following added to their project:
</span></span></span><span style=display:flex><span><span style=color:#75715e>  
</span></span></span><span style=display:flex><span><span style=color:#75715e>&lt;ItemGroup&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>  &lt;IncludeStridePlugin Include=&#34;MyPlugin&#34; Version=&#34;1.0.0&#34; /&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>&lt;/ItemGroup&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>--&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;Target</span> <span style=color:#a6e22e>Name=</span><span style=color:#e6db74>&#34;_StrideConfigureRequiredPluginsInPackage&#34;</span> <span style=color:#a6e22e>BeforeTargets=</span><span style=color:#e6db74>&#34;Build&#34;</span> <span style=color:#a6e22e>Condition=</span><span style=color:#e6db74>&#34;@(RequiredStridePlugin-&gt;Count()) &amp;gt; 0&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;ItemGroup&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;_StrideRequiredPlugin</span> <span style=color:#a6e22e>Include=</span><span style=color:#e6db74>&#34;@(RequiredStridePlugin)&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;/ItemGroup&gt;</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;WriteLinesToFile</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>File=</span><span style=color:#e6db74>&#34;$(IntermediateOutputPath)$(PackageId).targets&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Lines=</span><span style=color:#e6db74>&#34;&amp;lt;Project&amp;gt;;@(_StrideRequiredPlugin-&gt;&#39;&amp;lt;ItemGroup&amp;gt;&amp;lt;IncludeStridePlugin Include=&amp;quot;%(Identity)&amp;quot; Version=&amp;quot;%(Version)&amp;quot; /&amp;gt;&amp;lt;/ItemGroup&amp;gt;&#39;);&amp;lt;/Project&amp;gt;&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Overwrite=</span><span style=color:#e6db74>&#34;true&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;ItemGroup&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!-- TODO: how can we allow the user to add their own targets? Using PackageId as name of the file is required for it to be loaded.
</span></span></span><span style=display:flex><span><span style=color:#75715e>      see https://github.com/NuGet/docs.microsoft.com-nuget/blob/main/docs/reference/errors-and-warnings/NU5129.md --&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;None</span> <span style=color:#a6e22e>Include=</span><span style=color:#e6db74>&#34;$(IntermediateOutputPath)$(PackageId).targets&#34;</span> <span style=color:#a6e22e>PackagePath=</span><span style=color:#e6db74>&#34;build\&#34;</span> <span style=color:#a6e22e>Pack=</span><span style=color:#e6db74>&#34;true&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;None</span> <span style=color:#a6e22e>Include=</span><span style=color:#e6db74>&#34;$(IntermediateOutputPath)$(PackageId).targets&#34;</span> <span style=color:#a6e22e>PackagePath=</span><span style=color:#e6db74>&#34;buildTransitive\&#34;</span> <span style=color:#a6e22e>Pack=</span><span style=color:#e6db74>&#34;true&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;/ItemGroup&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/Target&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!--
</span></span></span><span style=display:flex><span><span style=color:#75715e>Based on IncludeStridePlugin declared we will try to load the latest version of the plugin.
</span></span></span><span style=display:flex><span><span style=color:#75715e>This only matters if two referenced library require the same plugin but with different versions.
</span></span></span><span style=display:flex><span><span style=color:#75715e>  
</span></span></span><span style=display:flex><span><span style=color:#75715e>&lt;IncludeStridePlugin Include=&#34;X&#34; Version=&#34;1.2.0&#34; /&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>&lt;IncludeStridePlugin Include=&#34;X&#34; Version=&#34;1.4.0&#34; /&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>becomes
</span></span></span><span style=display:flex><span><span style=color:#75715e>&lt;_StridePluginReference Include=&#34;X&#34; Version=&#34;1.4.0&#34; /&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>--&gt;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!-- We use the Inputs and Outputs to allow Target batching and group IncludeStridePlugin by package name --&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;Target</span> <span style=color:#a6e22e>Name=</span><span style=color:#e6db74>&#34;_StrideIncludePluginReferencesByHighestVersion&#34;</span> <span style=color:#a6e22e>BeforeTargets=</span><span style=color:#e6db74>&#34;CollectPackageReferences&#34;</span> <span style=color:#a6e22e>Inputs=</span><span style=color:#e6db74>&#34;@(IncludeStridePlugin)&#34;</span> <span style=color:#a6e22e>Outputs=</span><span style=color:#e6db74>&#34;__%(Identity)&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>&lt;!-- for each Version update _TempStridePluginVersion if Version &gt; _TempStridePluginVersion --&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;CreateProperty</span> <span style=color:#a6e22e>Value=</span><span style=color:#e6db74>&#34;%(IncludeStridePlugin.Version)&#34;</span> <span style=color:#a6e22e>Condition=</span><span style=color:#e6db74>&#34;&#39;$(_TempStridePluginVersion)&#39; == &#39;&#39; OR $([System.Version]::Parse(%(IncludeStridePlugin.Version))) &amp;gt; $([System.Version]::Parse($(_TempStridePluginVersion)))&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;Output</span> <span style=color:#a6e22e>TaskParameter=</span><span style=color:#e6db74>&#34;Value&#34;</span> <span style=color:#a6e22e>PropertyName=</span><span style=color:#e6db74>&#34;_TempStridePluginVersion&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;/CreateProperty&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>&lt;!-- include the plugin reference with the greatest version --&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;ItemGroup&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;_StridePluginReference</span> <span style=color:#a6e22e>Include=</span><span style=color:#e6db74>&#34;%(IncludeStridePlugin.Identity)&#34;</span> <span style=color:#a6e22e>Version=</span><span style=color:#e6db74>&#34;$(_TempStridePluginVersion)&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;/ItemGroup&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>&lt;!-- unset property for the next target invocation --&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;CreateProperty</span> <span style=color:#a6e22e>Value=</span><span style=color:#e6db74>&#34;&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;Output</span> <span style=color:#a6e22e>TaskParameter=</span><span style=color:#e6db74>&#34;Value&#34;</span> <span style=color:#a6e22e>PropertyName=</span><span style=color:#e6db74>&#34;_TempStridePluginVersion&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;/CreateProperty&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/Target&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!--
</span></span></span><span style=display:flex><span><span style=color:#75715e>For each _StridePluginReference we will add a PackageReference if not already set by the user (allows user to override the version).
</span></span></span><span style=display:flex><span><span style=color:#75715e>Needs to be invoked before CollectPackageReferences target for the packages to be picked up for build correctly.
</span></span></span><span style=display:flex><span><span style=color:#75715e>We only include build assets from the package to avoid the plugin being used for compilation.
</span></span></span><span style=display:flex><span><span style=color:#75715e>--&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;Target</span> <span style=color:#a6e22e>Name=</span><span style=color:#e6db74>&#34;_StrideIncludePluginReferencesFromPackages&#34;</span> <span style=color:#a6e22e>AfterTargets=</span><span style=color:#e6db74>&#34;_StrideIncludePluginReferencesByHighestVersion&#34;</span> <span style=color:#a6e22e>BeforeTargets=</span><span style=color:#e6db74>&#34;CollectPackageReferences&#34;</span> <span style=color:#a6e22e>Condition=</span><span style=color:#e6db74>&#34;@(_StridePluginReference-&gt;Count()) &amp;gt; 0&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;ItemGroup&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;PackageReference</span> <span style=color:#a6e22e>Include=</span><span style=color:#e6db74>&#34;@(_StridePluginReference)&#34;</span> <span style=color:#a6e22e>Exclude=</span><span style=color:#e6db74>&#34;@(PackageReference)&#34;</span> <span style=color:#a6e22e>IncludeAssets=</span><span style=color:#e6db74>&#34;build;buildTransitive&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;/ItemGroup&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/Target&gt;</span>
</span></span></code></pre></div><p>So why doesn&rsquo;t it work?</p><p>Well, the issue is simple - you can&rsquo;t run targets from other packages during Restore because they&rsquo;re not restored yet.
And if you cannot add the <code>PackageReference</code> before the restore then it&rsquo;s not restored, it&rsquo;s not in the dependency graph, not populated in <code>project.assets.json</code> and not taken into account during build.</p><p>Moreover, I found
<a href=https://github.com/NuGet/docs.microsoft.com-nuget/blob/main/docs/concepts/MSBuild-props-and-targets.md#guidance-for-the-content-of-msbuild-props-and-targets>this</a></p><blockquote><p>There are a few things that must not be done in packages&rsquo; .props and .targets, such as not specifying properties and items that affect restore, as those will be automatically excluded.</p><ul><li>Some examples of items that must not be added or updated: PackageReference, PackageVersion, PackageDownload, etc.</li></ul></blockquote><p>So it looks like we probably can&rsquo;t get away with indirectly including package references just yet.</p><h3 id=making-plugins-not-have-dependencies>Making plugins not have dependencies
<a class=anchor href=#making-plugins-not-have-dependencies>#</a></h3><p>Something I haven&rsquo;t considered too much but crossed my mind - what if we enforce <code>PrivateAssets=all</code> on any dependency of the plugin, thus making it not have dependencies at all, thus none of them will be circular? Will need to think more.</p><h2 id=next>Next?
<a class=anchor href=#next>#</a></h2><p>This post will be updated over time. For the main issue spawning these ideas look at
<a href=https://github.com/stride3d/stride/issues/1120>Stride Plugin RFC</a>.</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><span class="flex align-center" title='Last modified by Marian Dziubiak | October 16, 2023'><img src=/svg/calendar.svg class=book-icon alt=Calendar>
<span>Last modified October 16, 2023</span></span></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#detecting-something-is-a-plugin>Detecting something is a plugin</a></li><li><a href=#circular-dependencies>Circular dependencies</a><ul><li><a href=#indirect-reference-idea>Indirect reference idea</a></li><li><a href=#making-plugins-not-have-dependencies>Making plugins not have dependencies</a></li></ul></li><li><a href=#next>Next?</a></li></ul></nav></div></aside></main></body></html>